<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Mon Oct 30 2023 11:20:54 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="653f837bd262dee0673a0545" data-wf-site="60e5d747e768b207c1679675">
<head>
  <meta charset="utf-8">
  <title>Definições gerais do estabelecimento</title>
  <meta content="Definições gerais do estabelecimento" property="og:title">
  <meta content="Definições gerais do estabelecimento" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="../../css/normalize.css" rel="stylesheet" type="text/css">
  <link href="../../css/webflow.css" rel="stylesheet" type="text/css">
  <link href="../../css/delly-menus-qr-code.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="../../images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="../../images/webclip.png" rel="apple-touch-icon">
  
  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.1/dist/sweetalert2.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.1/dist/sweetalert2.min.js"></script>
  
  
</head>
<body>
  <section>
    <div data-animation="over-right" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
      <div class="contain">
        <a href="../../cliente/dashboard" class="brand w-nav-brand"></a>
        <nav role="navigation" class="nav-menu w-nav-menu">
          <a href="../../cliente/dashboard" class="nav-link w-nav-link">Início</a>
          <a href="../../cliente/definicoes-gerais/meu-qr-code" class="nav-link w-nav-link">Meu QR Code</a>
          <a href="../../cliente/artigos/artigos-main" class="nav-link w-nav-link">Meus Artigos</a>
          <a href="../../cliente/categorias/categorias-main" class="nav-link w-nav-link">Categorias</a>
          <a href="../../cliente/avaliacoes/avaliacoes-main" class="nav-link w-nav-link">Avaliações</a>
          <a href="../../cliente/definicoes-gerais/definicoes" class="nav-link w-nav-link">Definições</a>
          <a href="/logout" class="nav-link w-nav-link">Sair</a>
        </nav>
        <div class="menu-button w-nav-button">
          <div class="w-icon-nav-menu"></div>
        </div>
      </div>
    </div>
    <div class="shadow-1"></div>
  </section>
  <section class="section-7">
    <div class="contain">
      <div class="div-block-138">
        <div class="div-block-139">
          <a href="javascript:history.back()" class="back-now">e</a>
          <div class="text-block-44">Definições gerais</div>
        </div>
        <div></div>
      </div>
      <div class="form-block-4 w-form">
        <form th:each="c:${cliente}" th:action="'/editarcliente/'" id="email-form" name="email-form" data-name="Email Form" method="POST" th:object="${cliente}" enctype="multipart/form-data" class="w-clearfix" data-wf-page-id="653f837bd262dee0673a0545" data-wf-element-id="b6965ba1-6c38-2903-4afb-88e67be9290a">
          <div class="div-block-133">
          <label for="name-2" class="field-label-3">Nome da entidade</label>
          <input required th:value="${c.nome}" type="text" class="text-field-4 w-input" maxlength="256" name="nome" data-name="Name 2" placeholder="" id="name-2">
          <input required th:value="${c.id}"  type="hidden" class="text-field-4 w-input" maxlength="256" name="id" data-name="Name 2" placeholder="" id="id_c">
          <input required th:value="${c.estado}"  type="hidden" class="text-field-4 w-input" maxlength="256" name="estado" data-name="Name 2" placeholder="" id="estado">
          <input required th:value="${c.data_sub}"  type="hidden" class="text-field-4 w-input" maxlength="256" name="data_sub" data-name="Name 2" placeholder="" id="data_sub">
           <input required th:value="${c.selecinadoparceiro}"  type="hidden" class="text-field-4 w-input" maxlength="256" name="selecinadoparceiro" data-name="Name 2" placeholder="" id="selecinadoparceiro">
          </div>
          
          <div class="div-block-133">
          <label for="name-3" class="field-label-3">Mensagem de boas-vindas (para página inicial)</label>
          <input required th:value="${c.mensagem}" type="text" class="text-field-4 w-input" maxlength="256" name="mensagem" data-name="Name 2" placeholder="" id="name-2"></div>
          <div class="div-block-133">
          <label for="field" class="field-label-3">Descrição da entidade (para página sobre nós)</label>
          <textarea th:text="${c.descricao}" data-name="Field" maxlength="5000" id="descricao" name="descricao" placeholder="" class="text-field-4 long w-input"></textarea>
          </div>
          <div th:if="!${not #strings.isEmpty(c.logomarca)}"  class="div-block-133">
          
          <input type="file" accept="image/*" style="display:none" name="files" id="fileInput" onchange="preview_image(event)">
          <input id="profile_photo" type="hidden" name="profile_photo" value="no-image">
            
          <label for="email" class="field-label-3">Logomarca</label>
            <div class="photo-upload-input-wrapper">
            
            <label for="fileInput">
              <div class="photo-upload-input-field" id="take_div_upload">
                <div class="photo-upload-icon">m</div>
                <div class="photo-upload-text">Clique para fazer upload</div>
              </div>
              </label>
              
              <div class="uploaded-photo-wrapper" id="display_div_upload">
                <div class="uploaded-photo-content">
                  <div class="uploaded-photo-div"  id= "image1">
                    <div class="photo-contain">
                    <img src="https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg" alt="" class="image"></div>
                  </div>
                  <div class="uploaded-photo-info">
                    <div class="div-block-126">
                      <div class="uploaded-image-name" id="file_name">imagem-teste.png</div>
                      <div class="uploaded-image-resolution">200 x 180</div>
                    </div>
                  </div>
                </div>
                <label for="fileInput">
                <a  class="button-2 gray w-button"><span class="form-button-icon">j</span>Substituir</a>
                <a  class="button-2 gray w-button"><span class="form-button-icon">g</span>Apagar</a>
                </label>
              </div>
            </div>
          </div>
					<div th:if="${not #strings.isEmpty(c.logomarca)}"
						class="div-block-133">

						<input type="file" accept="image/*" style="display: none"
							name="files" id="fileInput" onchange="preview_image(event)">
						<input id="profile_photo" type="hidden" name="profile_photo"
							value="no-image"> <label for="email"
							class="field-label-3">Logomarca</label>


						<div class="uploaded-photo-content">
							<div class="uploaded-photo-div">
								<div class="photo-contain" id="image1">
									<img id="thumbnail"
										style="max-width: 100%; max-height: 100%; display: block;"
										th:src="@{${'/upload/cliente/' + c.logomarca}}"
										onerror="this.src='https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg';"
										sizes="100vw" alt="">
								</div>
							</div>
							<div class="uploaded-photo-info">
								<div class="div-block-126">
									<div class="uploaded-image-name" id="file_name"
										th:text="${c.logomarca}">imagem-teste.png</div>
									<div class="uploaded-image-resolution">200 x 180</div>
								</div>
							</div>
						</div>
						<label for="fileInput"> <a class="button-2 gray w-button"><span
								class="form-button-icon">j</span>Substituir</a> <a
							class="button-2 gray w-button"><span class="form-button-icon">g</span>Apagar</a>
						</label>


							</div>
						<div th:if="!${not #strings.isEmpty(c.fundo)}"class="div-block-133">

							<input type="file" accept="image/*" style="display: none"
								name="files2" id="fileInput2" onchange="preview_image2(event)">
							<input id="profile_photo2" type="hidden" name="profile_photo2"
								value="no-image"> <label for="email"
								class="field-label-3">Capa</label>
							<div class="photo-upload-input-wrapper">

								<label for="fileInput2">
									<div class="photo-upload-input-field" id="take_div_upload2">
										<div class="photo-upload-icon">m</div>
										<div class="photo-upload-text">Clique para fazer upload</div>
									</div>
								</label>

								<div class="uploaded-photo-wrapper" id="display_div_upload2">
									<div class="uploaded-photo-content">
										<div class="uploaded-photo-div" id="image2">
											<div class="photo-contain">
												<img
													src="https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg"
													alt="" class="image">
											</div>
										</div>
										<div class="uploaded-photo-info">
											<div class="div-block-126">
												<div class="uploaded-image-name" id="file_name2">imagem-teste.png</div>
												<div class="uploaded-image-resolution">200 x 180</div>
											</div>
										</div>
									</div>
									<label for="fileInput2"> <a
										class="button-2 gray w-button"><span
											class="form-button-icon">j</span>Substituir</a> <a
										class="button-2 gray w-button"><span
											class="form-button-icon">g</span>Apagar</a>
									</label>
								</div>
							</div>
						</div>


						<div th:if="${not #strings.isEmpty(c.fundo)}"  class="div-block-133">

							<input type="file" accept="image/*" style="display: none"
								name="files2" id="fileInput2" onchange="preview_image2(event)">
							<input id="profile_photo2" type="hidden" name="profile_photo2"
								value="no-image"> <label for="email"
								class="field-label-3">Capa</label>
							

								
								
									<div class="uploaded-photo-content">
										<div class="uploaded-photo-div" >
											<div class="photo-contain" id="image2">
										<img id="thumbnail"
											style="max-width: 100%; max-height: 100%; display: block;"
											th:src="@{${'/upload/cliente/' + c.fundo}}"
											onerror="this.src='https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg';"
											sizes="100vw" alt="">
									</div>
										</div>
										<div class="uploaded-photo-info">
											<div class="div-block-126">
												<div class="uploaded-image-name" id="file_name2" th:text="${c.fundo}">imagem-teste.png</div>
												<div class="uploaded-image-resolution">200 x 180</div>
											</div>
										</div>
									</div>
									<label for="fileInput2"> <a
										class="button-2 gray w-button"><span
											class="form-button-icon">j</span>Substituir</a> <a
										class="button-2 gray w-button"><span
											class="form-button-icon">g</span>Apagar</a>
									</label>
								
							
						</div>
						 

	

					
					<div class="div-block-133">
          <label for="name-3" class="field-label-3">Email</label>
          <input required th:value="${c.email}" type="email" class="text-field-4 w-input" maxlength="256" name="email" data-name="Name 2" placeholder="" id="name-2"></div>
          <div class="div-block-133">
          <label for="name-2" class="field-label-3">Telemóvel</label>
          <input required th:value="${c.telefone}" type="text" class="text-field-4 w-input" maxlength="256" name="telefone" data-name="Name 2" placeholder="" id="name-2"></div>
          <div class="div-block-133">
          <label for="name-3" class="field-label-3">Senha</label>
          <input required th:value="${c.palavrapasse}" type="password" class="text-field-4 w-input" maxlength="256" name="palavrapasse" data-name="Name 2" placeholder="" id="name-2"></div>
          <button type="submit" class="button-2 blue float-right all w-button">Guardar</button>
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form.</div>
        </div>
      </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=60e5d747e768b207c1679675" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="../../js/webflow.js" type="text/javascript"></script>
   <script src="/js/ckeditor5/ckeditor.js"></script>
  <script>
//when the form is submitted 
  $('.form-important-class').submit(()=>{	
  	// wait 1000ms (so we have time to see the success wrapper show)
  	setTimeout(()=>{
      	// click our .form-success-trigger
        // this class has an Interaction on it that runs our Lottie icon animation
      	$('.form-success-trigger').click();
    },20000);
    // NICE!!!!!!!!
  });
  
	ClassicEditor.create(document.querySelector('#descricao'))
	 .catch(error => {
		console.error(error)
	});	
  
  
  $('#take_pic1').on('click', function(){
	  document.getElementById("file_name").innerHTML = "<div class='uploaded-image-name'>imagem-teste.png</div>";
	  document.getElementById("image1").innerHTML = " <div class='photo-contain'><img src='https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg' alt=''></div>";
	  var fileInputvalue = document.getElementById("fileInput").value=null;

	 });
	function preview_image(event)
	{
	document.getElementById("image1").innerHTML = "<div class='photo-contain'><img style='max-width: 100%; max-height: 100%; display: block;' id='output_image'></div>";
	var reader = new FileReader();
	reader.onload = function(){
	var output = document.getElementById('output_image');

	   var file_name =$("#fileInput").val().split("\\").pop();
	       $("#file_name").html(file_name)

	output.src = reader.result;
	  var take_div_upload = document.getElementById("take_div_upload");
	  var display_div_upload = document.getElementById("display_div_upload");
	    take_div_upload.style.display = "none";
	    display_div_upload.style.display = "block";
	}
	reader.readAsDataURL(event.target.files[0]);
	}

	
	
	$('#take_pic2').on('click', function(){
		  document.getElementById("file_name2").innerHTML = "<div class='uploaded-image-name'>imagem-teste.png</div>";
		  document.getElementById("image2").innerHTML = " <div class='photo-contain'><img src='https://d3e54v103j8qbb.cloudfront.net/img/image-placeholder.svg' alt=''></div>";
		  var fileInputvalue = document.getElementById("fileInput").value=null;

		 });
		function preview_image2(event)
		{
		document.getElementById("image2").innerHTML = "<div class='photo-contain'><img style='max-width: 100%; max-height: 100%; display: block;' id='output_image2'></div>";
		var reader = new FileReader();
		reader.onload = function(){
		var output = document.getElementById('output_image2');

		   var file_name =$("#fileInput2").val().split("\\").pop();
		       $("#file_name2").html(file_name)

		output.src = reader.result;
		  var take_div_upload = document.getElementById("take_div_upload2");
		  var display_div_upload = document.getElementById("display_div_upload2");
		    take_div_upload.style.display = "none";
		    display_div_upload.style.display = "block";
		}
		reader.readAsDataURL(event.target.files[0]);
		}
  
		
		
		
		
// CKEDITOR.replace( 'descricao');
  
  var id = window.btoa($("#id_c").val());
  
  $(document).ready(function() {
		    $('form').submit(function(event) {
		        event.preventDefault(); // Evita que o formulário seja enviado normalmente
				
				//var a = CKEDITOR.instances.descricao.getData();
 				//$("#descricao").val(a);	
				//alert(a);
		        const loadingSwal = Swal.fire({
		            title: "Aguarde...",
		            didOpen: () => {
		                Swal.showLoading()
		            },
		        });

		        // Crie um objeto FormData para o formulário
		        const formData = new FormData(this);

		        // Envie os dados via AJAX usando FormData
		        const url = "/editarcliente/"+id;
		        $.ajax({
		            type: "POST",
		            url: url,
		            data: formData,
		            processData: false, // Não processar o FormData (já está em um formato adequado para envio)
		            contentType: false, // Não definir o tipo de conteúdo (o navegador irá definir como 'multipart/form-data')
		            success: function(data) {
		                // Esconda a animação de carregamento
		                loadingSwal.close();

		                // Lógica para manipular a resposta do servidor
		                if (data === "index") {
		                    Swal.fire({
		                        title: "Sessão expirada",
		                        text: "",
		                        icon: "info"
		                    });
		                } else {
		                    Swal.fire({
		                        title: "Perfil Editado",
		                        text: "",
		                        timer: 2500,
		                        icon: "success"
		                    }).then(()=>{window.location.href = "/cliente/definicoes-gerais/definicoes";})
		                      }
		            },
		            error: function(xhr, textStatus, errorThrown) {
		                // Esconda a animação de carregamento
		                loadingSwal.close();

		                // Mostre a mensagem de erro
		                Swal.fire({
		                    title: "Erro!",
		                    text: xhr.responseText,
		                    icon: "error"
		                });
		            }
		        });
		    });
		});

  
 
  

  
  </script>
</body>
</html>