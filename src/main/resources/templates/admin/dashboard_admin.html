<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Mon Oct 30 2023 11:20:54 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="653862914a13fb485bad14d3" data-wf-site="60e5d747e768b207c1679675">
<head>
  <meta charset="utf-8">
  <title>Dashboard</title>
  <meta content="Dashboard" property="og:title">
  <meta content="Dashboard" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/css/delly-menus-qr-code.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="/images/webclip.png" rel="apple-touch-icon">
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
   
   
   
   
</head>
<style>
    /* Estilo dos botões */
     .button-red {
        background-color: #d9534f; /* Vermelho mais morto */
        color: white;
        border: none;
        padding: 10px 20px;
         border-radius: 10px; /* Bordas circulares */
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }

    .button-green {
        background-color: grey; /* Verde mais morto */
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        border-radius: 10px; /* Bordas circulares */
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }

    .button-blue {
        background-color: #5bc0de; /* Azul mais morto */
        color: white;
        border: none;
        padding: 10px 20px;
         border-radius: 10px; /* Bordas circulares */
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
    }
    
    .div-block {
  background-color: #fff;
  border: 1px solid #f5f5f5;
  border-radius: 8px;
  justify-content: space-between;
  align-items: center;
  width: 794px;
  height: 135px;
  margin-top: 15px;
  padding-left: 30px;
  padding-right: 30px;
  display: flex;
}

.div-block-2 {
  justify-content: center;
  align-items: center;
  display: flex;
}

.link-1 {
  color: #000;
  padding-left: 15px;
  padding-right: 15px;
  line-height: 50px;
  text-decoration: none;
}

.div-block-3 {
  justify-content: center;
  align-items: center;
  display: flex;
}


nav1 {
  background-color: #EEEEEE; /* Cor do fundo do nav */
  padding: 10px;
}

.pagination {
  display: flex;
  justify-content: center;
  list-style: none;
  padding: 0;
}

.page-item {
  margin: 0 5px;
}

.page-link {
  display: block;
  padding: 10px 15px;
  text-decoration: none;
  color: #007bff;
  background-color: white; /* Fundo branco para os links */
  border: 1px solid #dee2e6;
  border-radius: 4px;
}

.page-link:hover {
  background-color: #e2e6ea; /* Cor ao passar o mouse */
}

.page-item.disabled .page-link {
  color: #6c757d;
  pointer-events: none;
}

.page-link.active {
  background-color: #007bff; /* Fundo azul para o botão selecionado */
  color: white; /* Texto branco para o botão selecionado */
}

</style>
<body>


<!-- 	  <div th:insert="/fragmentos/bar :: bar"></div>  -->

  <section>
    <div data-animation="over-right" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
      <div class="contain">
        <a href="../admin/dashboard_admin" aria-current="page" class="brand w-nav-brand w--current"></a>
        <nav role="navigation" class="nav-menu w-nav-menu">
          <a href="/admin/dashboard_admin/0" aria-current="page" class="nav-link w-nav-link w--current">Início</a>
           <a href="/logout" class="nav-link w-nav-link">Sair</a>
        </nav>
        <div class="menu-button w-nav-button">
          <div class="w-icon-nav-menu"></div>
        </div>
      </div>
    </div>
    <div class="shadow-1"></div>
  </section>
  <section class="section-7">
    <div class="contain">
      
      <div>
        <div class="w-layout-grid grid-2">
          <div id="w-node-_2c6ec898-cbdb-a42f-8628-f0f37b7ed048-5bad14d3" class="div-block-135">
            <div class="text-block-37">Total de receitas </div>
            <div class="text-block-38"  ><span class="currency">KZ</span> [[${#numbers.formatDecimal(total,3,'POINT',2,'COMMA')}]] </div>
            <div class="div-block-136">
              <a th:href="'/export'" class="link-5">Baixar relatórios</a>
            </div>
          </div>
          <div id="w-node-_03ff575e-ce26-5549-504e-28bf48fe4795-5bad14d3" class="div-block-135">
            <div class="text-block-37">Receitas do  mês</div>
            <div class="text-block-38"  ><span class="currency">KZ</span> [[${#numbers.formatDecimal(estemes,3,'POINT',2,'COMMA')}]]</div>
            <div class="div-block-136">
              <a th:href="'/exportmes'" class="link-5">Baixar relatórios</a>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="text-block-39">Clientes ([[${count}]])   |   Pagos ([[${countpago}]])</div>
      </div>
      
       <div class="wrapper-1">
        <form action="/search" class="search-no-filtro w-form">
        <input type="search" class="search-input-3 w-input" maxlength="256" name="query" placeholder="Pesquisa..." id="search" required="">
        <input type="submit" value="p" class="search-button-3 _89 w-button">
        </form>
        <div class="div-block-12">
          <div class="form-block-3 w-form">
            <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form-2" data-wf-page-id="653f686889f872ddead9b51c" data-wf-element-id="c45fbe29-e9c7-fa32-88e8-6a7470af9920">
              <div class="filters-flex">
              <select id="estado" name="field-2" data-name="Field 2" class="select-field w-select" onchange="filtro()">
                  <option value="">Estado</option>
                  <option value="Pago" >Pago</option>
                  <option value="Não pago" >Não pago</option>
                </select>
                
                 <button id="excel" style="background-color: #346FC7; color: white;"  name="field-2" data-name="Field 2" class="select-field w-select" onclick="baixa()" >Baixar</button>
                </div>
                
                
                
                 </form>
<!--             <div class="w-form-done"> -->
<!--               <div>Thank you! Your submission has been received!</div> -->
<!--             </div> -->
<!--             <div class="w-form-fail"> -->
<!--               <div>Oops! Something went wrong while submitting the form.</div> -->
<!--             </div> -->
          </div>
        </div>
      </div>
      <div  class="avaliacoes-wrapper" id="evx">
       <a th:each="r:${clientes}" th:with="de=${T(ao.dely.controller.ArquivoUploadController).Codifica(r[0])}"   class="page_link minhas_marcacoes w-inline-block">
          <div class="page_link_text_wrapper">
            <div class="text-reclamacao">
              <div class="date">Nome:</div>
              <div class="date dark"  th:text="${r[1] +'  ('+r[2]+')'}" >Quarta-feira, 12 Maio 2021</div>
            </div>
            <div class="text-reclamacao">
              <div class="date">Estado:</div>
              <div th:if="${r[3]}=='Pago'" class="date dark" Style="color:green"  th:text="${r[3]}" >Quarta-feira, 12 Maio 2021</div>
              <div th:if="${r[3]}=='Não pago'" class="date dark" Style="color:red"  th:text="${r[3]}" >Quarta-feira, 12 Maio 2021</div>
            </div>
            <div class="text-reclamacao">
              <div class="date">Data:</div>
              <div class="date dark"  th:text="${#dates.format(r[4], 'dd/MM/yyyy')}" >Quarta-feira, 12 Maio 2021</div>
            </div>
          </div>
          <div  th:id="'luca'+${r[0]}" style="display:none;" >
          <div>
         <input th:id="'dt'+${r[0]}" th:value="${r[4]}" type="date" class="text-field-4 w-input" name="dt">
         </div>
          <button th:onclick="javascript:dat(this.getAttribute('data-id'))" th:attr="data-id=${de}" class="button-green" >Salvar</button>
          </div>
          <button th:id="'a'+${r[0]}"  th:onclick="javascript:dias(this.getAttribute('data-id'))" th:attr="data-id=${r[0]}" class="button-red">+ dias</button>
    	   <button th:id="'b'+${r[0]}"  th:onclick="javascript:pay(this.getAttribute('data-id'))" th:attr="data-id=${de}" class="button-blue">Validar ref.</button>
    	   <button th:id="'c'+${r[0]}" class="button-green" th:onclick="javascript:menu(this.getAttribute('data-id'))" th:attr="data-id=${de}" >Menu</button>
<!--    	    <button class="button-red">Apagar</button>-->
        </a>
       
      </div>
      
       
 
      <div th:if="${#lists.isEmpty(clientes)}" class="text-block-40">Sem conteúdos de momento...</div>


			<nav1 th:if = "${totalPages > 1}" aria-label="Page navigation example">
				<ul  class="pagination justify-content-center">
					<li class="page-item"><a class="page-link"  th:if="${currentPage > 0}" th:href="@{'/admin/dashboard_admin/' + ${currentPage - 1}}"
						tabindex="-1">Anterior</a></li>
					<li class="page-item"  th:each="i: ${#numbers.sequence(0, totalPages)}" >
				
					<a class="page-link"  th:if="${currentPage != i}"  th:href="@{'/admin/dashboard_admin/' + ${i}}">[[${i}]]</a>
					<a class="page-link active" th:if="${currentPage == i}"  href="#">[[${i}]]</a>
					</li>
					
					<li class="page-item"><a class="page-link" th:if="${currentPage < totalPages}" th:href="@{'/admin/dashboard_admin/' + ${currentPage + 1}}">Proxima</a></li>
				</ul>
			</nav1>


	

<!-- 			<div th:if = "${totalPages > 1}"> -->
<!-- 			<div class = "row col-sm-10"> -->
<!-- 				<div class = "col-sm-2"> -->
<!-- 					Total Rows: [[${totalItems}]]  -->
<!-- 				</div> -->
<!-- 				<div class = "col-sm-1"> -->
<!-- 					<span th:each="i: ${#numbers.sequence(0, totalPages)}"> -->
<!-- 						<a th:if="${currentPage != i}" th:href="@{'/admin/dashboard_admin/' + ${i}}">[[${i}]]</a> -->
<!-- 						<span th:unless="${currentPage != i}">[[${i}]]</span>  &nbsp; &nbsp; -->
<!-- 					</span> -->
<!-- 				</div> -->
<!-- 				<div class = "col-sm-1"> -->
<!-- 					<a th:if="${currentPage < totalPages}" th:href="@{'/admin/dashboard_admin/' + ${currentPage + 1}}">Next</a> -->
<!-- 					<span th:unless="${currentPage < totalPages}">Next</span> -->
<!-- 				</div> -->
				
<!-- 				 <div class="col-sm-1"> -->
<!--     				<a th:if="${currentPage < totalPages}" th:href="@{'/admin/dashboard_admin/' + ${totalPages}}">Last</a> -->
<!-- 					<span th:unless="${currentPage < totalPages}">Last</span> -->
<!--    				 </div> -->
<!-- 			</div> -->
<!-- 		</div> -->
    
    </div>
    
    
  </section>
   <section th:if="${prim}==1" class="primeira-div" data-ix="open-primeira-div">
    <div class="div-block-152">
      <div class="w-layout-grid grid-16">
        <div id="w-node-_82fdc12c-465d-cff4-53bd-1f908f797b33-5bad14d3">
          <h1 class="heading-7">Caro cliente,</h1>
          <p class="paragraph-4">Obrigado por escolher o &quot;Delly&quot;.<br><br>O Modo &quot;teste&quot; termina em 24 Horas. Para continuar a utilizar o seu preçário digital, assina a um dos nossos pacotes.</p>
          <a th:onclick="javascript:setprim(this.getAttribute('data-id'))" th:attr="data-id=${id}" href="../cliente/definicoes-gerais/escolher-pacote" class="button-4 _100 w-button">Assinar agora</a>
          <a th:onclick="javascript:setprim(this.getAttribute('data-id'))" th:attr="data-id=${id}" href="#" class="button-4 _100 _500 w-button" data-ix="close-primeira-div">Continuar teste</a>
        </div>
        <div id="w-node-c8680f68-0645-089d-027e-5e4be795c2eb-5bad14d3" class="div-block-153">
          <div class="text-block-171">Assista o vídeo abaixo e aprenda a configurar o Delly antes de usar...</div>
          <div style="padding-top:56.17021276595745%" class="w-embed-youtubevideo youtube"><iframe src="https://www.youtube.com/embed/GjsQH6Iiyj4?rel=0&amp;controls=1&amp;autoplay=0&amp;mute=0&amp;start=0" frameborder="0" style="position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:auto" allow="autoplay; encrypted-media" allowfullscreen="" title="COMO CONFIGURAR DELLY"></iframe></div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=60e5d747e768b207c1679675" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/webflow.js" type="text/javascript"></script>
  <script>
  
//when the form is submitted 
  $('.form-important-class').submit(()=>{	
  	// wait 1000ms (so we have time to see the success wrapper show)
  	setTimeout(()=>{
      	// click our .form-success-trigger
        // this class has an Interaction on it that runs our Lottie icon animation
      	$('.form-success-trigger').click();
    },2000);
    // NICE!!!!!!!!
  });
  
  
  function dias(param){
	   //alert(param)
       $("#luca"+param).fadeIn(1000).show();
	   $("#a"+param).fadeOut().hide();
	   $("#b"+param).fadeOut().hide();
	   $("#c"+param).fadeOut().hide();
	  
  } 
  
  
  function baixa(){
	  //alert($("#estado").val())
	 // $.get( '/excel/'+$("#estado").val());
	 
	  if($("#estado").val()===''){
		  window.location.href="/excel/null";
	  }else{
	  window.location.href="/excel/"+$("#estado").val();}
	 
	 
  }
  
  
  function setprim(param){
	 // alert(param)
	  $.post( '/prim/'+param);
  }
  
  	
	$('#search').keyup(function(){filtro()})
	
	
	function filtro(){
	
	
	var search = document.getElementById("search").value
	
	var estado = document.getElementById("estado").value

	
	var htmle = ""
	 var url = "/clientesprocurar/";
	 $.ajax({
     type: "POST",
     url: url,
     data: {'search':search,'estado':estado},
     success: function(data){
  	   
  	   		if(data.length>0){
  	     	   $(data).each(function(i, cliente){
  	     		 
  	     		  var re = window.btoa(cliente.id);
  	     		  //var ima = "/upload/evento/"+evento[1]
  	     		  
  	     		  var dataSub = cliente.data_sub;
				  var partesData = dataSub.split('-');
				  var dataFormatada = partesData[2] + '/' + partesData[1] + '/' + partesData[0];
					
					htmle += '<a class="page_link minhas_marcacoes w-inline-block">'+
                             '<div class="page_link_text_wrapper">'+
                             '<div class="text-reclamacao">'+
                             '<div class="date">Nome:</div>'+
                             '<div class="date dark"  >'+cliente.nome+' ('+cliente.telefone+')</div>'+
            			     '</div>'+
            				 '<div class="text-reclamacao">'+
              			     '<div class="date">Estado:</div>'+
              				 (cliente.estado==='Pago'?'<div class="date dark" Style="color:green"   >Pago</div>':'' )+
              				 (cliente.estado==='Não pago'?'<div class="date dark" Style="color:red"   >Não pago</div>':'' )+
            				 '</div>'+
            				 '<div class="text-reclamacao">'+
              				 '<div class="date">Data:</div>'+
                             '<div class="date dark"  >'+dataFormatada+'</div>'+
                             '</div>'+
                             '</div>'+
                           //  '<form action="/val/'+re+'" id="luca'+cliente.id+'" style="display:none;" method="POST" >'
                             '<div  id="luca'+cliente.id+'" style="display:none;"  >'+
                             '<input id="dt'+cliente.id+'"  value="'+cliente.data_sub+'" type="date" class="text-field-4 w-input" name="dt">'+
                             ' <button onclick="dat(\'' + re + '\')" class="button-green" >Salvar</button>'+
                             '</div>'+
                             //'</form>'+
                              '<button id="a'+cliente.id+'" onclick="dias(\'' + cliente.id + '\')" class="button-red">+ dias</button>' +
					    	  '<button id="b'+cliente.id+'" onclick="pay(\'' + re + '\')" class="button-blue">Validar</button>'  +
               				 '<button class="button-green" id="c'+cliente.id+'" onclick="menu(\'' + re + '\')">Menu</button>' +
							 '</a>';
			        		 
			        		 
			        		 
			        		 
			        $('#evx').html(htmle);  	
	
  	     
  	    	   });}else{$('#evx').html('<div class="card-item-2 name">'+
   	                     '<div class="text-block" >Sem Registro</div>'+
	                     '</div>')
	    	   }
  	     	 
  	       
  	        }
  	        
  	        
  	    });
  	 
  

  }
  
  function menu(param){window.open("/cliente/menu/menu/"+param)}
  
  
  function pay(param){
	  //alert(param)
	  const entrada = Swal.fire({
		  title: "Insira a referencia do pagamento por favor.",
		  input: "text",
		  //inputAttributes: {autocapitalize: "off"},
		  showCancelButton: true,
		  confirmButtonText: "Verificar",
		  cancelButtonText: "Cancelar",
		  //confirmButtonColor: "green",
		  showLoaderOnConfirm: true,
		  preConfirm:  (ref) => {
		    try {
		      //alert(login+ '  '+ param)
		      
		        const url = "/pay/"+ref+"/"+param;
		        $.ajax({
		            type: "POST",
		            url: url,
		            success: function(data) {
		                // Esconda a animação de carregamento
		                //entrada.close();
							alert(data)
		                // Lógica para manipular a resposta do servidor
		                if (data === "ref_nao_existe") {
		                    Swal.fire({
		                        title: "Referencia não existe!!",
		                        text: "",
		                        icon: "info"
		                    });
		                } 
		                else if (data === "Ja foi pago") {
		                    Swal.fire({
		                        title: "Referencia já foi Paga !!",
		                        text: "",
		                        icon: "info"
		                    });
		                }else {
		                    Swal.fire({
		                        title: "Sucesso",
		                        text: "Pagamento Activo",
		                        timer: 2500,
		                        icon: "success"
		                    })
		                    
		                   
		                }
		            },
		            error: function(xhr, textStatus, errorThrown) {
		                // Esconda a animação de carregamento
		                //loadingSwal.close();

		                // Mostre a mensagem de erro
		                Swal.fire({
		                    title: "Erro!",
		                    text: xhr.responseText,
		                    icon: "error"
		                });
		            }
		        });
		     
		    } catch (error) {
		      Swal.showValidationMessage(`
		        Request failed: ${error}
		      `);
		    }
		  }
		  
		});
  }
  
  
  function dat(param){
	  //alert(param)
	  
		 
		      //alert(login+ '  '+ param)
		     
		        const url = "/val/"+param+"/"+$("#dt"+window.atob(param)).val();
		        $.ajax({
		            type: "POST",
		            url: url,
		            success: function(data) {
		                // Esconda a animação de carregamento
		                //entrada.close();
						
		                // Lógica para manipular a resposta do servidor
		                if (data === "index") {
		                    Swal.fire({
		                        title: "Referencia não existe!!",
		                        text: "",
		                        icon: "info"
		                    });
		                } else {
		                    Swal.fire({
		                        title: "Sucesso",
		                        text: "Subscrição Activa",
		                        timer: 2500,
		                        icon: "success"
		                    })
		                    .then(()=>{window.location.reload();})
		                    
		                   
		                }
		            },
		            error: function(xhr, textStatus, errorThrown) {
		                // Esconda a animação de carregamento
		                //loadingSwal.close();

		                // Mostre a mensagem de erro
		                Swal.fire({
		                    title: "Erro!",
		                    text: xhr.responseText,
		                    icon: "error"
		                });
		            }
		        });
		     
		  
		  
		  
		
  }
  
  
  </script>
</body>
</html>